<!DOCTYPE html>
<html lang="en">
<head>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" type="text/css" href="styles_login.css">
 
    <title>Main Page</title>
</head>
<body onload="employee()">
<h1 style="text-align:center; color:white; font-weight:bold">Main Page</h1>
<br><br><br>
<table style="text-align:center; color:white; font-weight:bold" id="resTable"class="table table-striped"> </table>
<br><br><br>

<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/create_form.html'" id="createForm">Create Reimbursement Form</button>
<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/add_grade.html'" id="add_grade">Add grade to your Reimbursement Form</button>
<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/approve_list.html'" id="approve_list">Approve the Pending Reimbursement Forms</button>
<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/getGrade.html'" id="getGrade">See the Grades of Reimbursement Form</button>
<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/statusPage.html'"id="statusPage">See the Approves for Pending Forms</button>
<button type="button" class="btn btn-primary btn-lg btn-block" onclick="window.location.href='http://localhost:8080/TuitionPro/forms_check.html'"id="statusPage">See Your Pending Forms</button>

<button onclick="logOut()" type="button" class="btn btn-danger btn-primary btn-lg btn-block " style=" position:absolute; bottom:0;" onclick="">Log Out</button>
</body>
<script>
    function logOut(){
    
        let xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function() {

        if(this.readyState == 4 && this.status == 200) {
            console.log(this.responseText);
            window.location.href='http://localhost:8080/TuitionPro/index.html'
            

        
         }

        }

    xhttp.open("GET", "http://localhost:8080/TuitionPro/logOut.do", true);

    xhttp.send();

    }
    function employee() {
   
        let xhttp = new XMLHttpRequest();

        xhttp.onreadystatechange = function() {

            if(this.readyState == 4 && this.status == 200) {
                console.log(this.responseText);
                let employee = JSON.parse(this.responseText);
                var table = document.getElementById("resTable");
                resTable.innerHTML=`<tr>
                                  <th>User ID</th>
                                  <th>Name</th>
                                  <th>Surname</th>
                                  <th>email</th>
                                  <th>Department ID</th>
                                  <th>Supervisor ID</th>
                                  <th>BENCO</th>
                                  </tr>`
                
               
                
                let row=table.insertRow(1);
                let cell1=row.insertCell(0);
                let cell2=row.insertCell(1);
                let cell3=row.insertCell(2);
                let cell4=row.insertCell(3);
                let cell5=row.insertCell(4);
                let cell6=row.insertCell(5);
                let cell7=row.insertCell(6);
              

                cell1.innerHTML=employee.id;
                cell2.innerHTML=employee.name;
                cell3.innerHTML=employee.surname;
                cell4.innerHTML=employee.email;
                cell5.innerHTML=employee.department_id;
                cell6.innerHTML=employee.supervisor_id;
                cell7.innerHTML=employee.benco;
                
                
            
                
                }
        }

        xhttp.open("GET", "http://localhost:8080/TuitionPro/getUser.do", true);

        xhttp.send();

        
        
    }
</script>

</html>
